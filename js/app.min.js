var app=angular.module("app",["ngGrid"]);app.controller("ctrl",function($scope){function updateArrayIndex(rows){for(var i=0;i<rows.length;i++)rows[i].idx=i;return rows}$scope.data=[{idx:0,title:"eve"},{idx:1,title:"dog"},{idx:2,title:"cat"},{idx:3,title:"bird"},{idx:4,title:"adam"}],$scope.gridOpt={data:"data",columnDefs:[{field:"idx",displayName:"#",width:"64px"},{field:"title",displayName:"title"}],sortInfo:{fields:["idx"],directions:["asc"]},plugins:[new ngGridDraggableRow("idx")]},$scope.$on("ngGrigDraggableRowEvent_rowDragStart",function(evt,args){if(console.log("START row drag"),args.rowItemsMove.length>1&&($scope.dragRowNum=args.rowItemsMove.length,$scope.$apply(),args.dataTransfer.setDragImage)){var dragImage=document.getElementById("dragIconMultiRows");args.dataTransfer.setDragImage(dragImage,16,16)}}),$scope.$on("ngGrigDraggableRowEvent_changeRowOrderPre",function(evt,willSortInit){console.log("START reordering rows by drag"),willSortInit&&console.log("sort wiil change")}),$scope.$on("ngGrigDraggableRowEvent_changeRowOrderPost",function(evt,doneSortInit){console.log("END reordering rows by drag"),updateArrayIndex($scope.data),doneSortInit&&console.log("sort initialized")})});